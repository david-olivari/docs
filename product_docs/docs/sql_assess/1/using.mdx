---
title: Using EDB SQL Assess
navTitle: Using
---

EDB SQL Assess is a Java-based command line tool that the end user can download and install on their test setup where they can put Oracle in trace mode and run the application. The end user can run a test program or regression test suite that performs most of the possible user actions so that all queries get captured in the trace file. The tool doesn't provide the ability to help put Oracle in trace mode or automatically retrieve the trace file.  The generation and retrieval of the trace file from the server (if different than the machine where the tool is being run) are separate operations performed manually by the user.

## Generating a SQL trace file

The EDB SQL Assess utility provides the ability to parse Oracle trace files to identify the SQL statements that were executed during an application database session. Once identified, it can assess those statements for their compatibility with EDB Postgres Advanced Server.

To generate the trace file for an application, perform the following steps:

1. Start the application and let the application connect to the Oracle database server. 

   For the remaining steps, assume that the Oracle user used by the application in the examples is RS4_LIN32.

2. Connect to the Oracle database using SQL*Plus, SQL Developer, or another Oracle client as a user with privileges. With the privileged user, query the `SYS.V$SESSION` and `SYS.V$PROCESS` synonyms and underlying `SYS.V_$SESSION` and `V_$PROCESS` tables and execute the `DBMS_SYSTEM.SET_SQL_TRACE_IN_SESSION` procedure to initiate a trace.

3. In the Oracle client (for example, SQL*Plus), execute the following query to retrieve the session Id (SID) and serial number for the application connection:

   ```SQL
   SELECT sid, serial#, substr(username, 1, 10), process FROM sys.v_$session WHERE username = 'RS4_LIN32';
   __OUTPUT__

    SID   SERIAL#   SUBSTR(USERNAME,1,10)    PROCESS
   ---- ---------- ------------------------ --------
	16	   6590     RS4_LIN32                35835
   ```
   !!! Tip
      Note the `SID` and `SERIAL#` returned by the query.

4. In the Oracle client, execute the following statement to start a trace:
   
   ```SQL
   EXECUTE dbms_system.set_sql_trace_in_session(16, 6590, true);
   ```

     This statement enables SQL tracing for the session initiated by the application.

   !!! Note
     Depending on the applicationsâ€™ database activity, the trace files may become large and could impact database resource usage and performance.  In operational environments especially, it is recommended that a trace be run for only the amount of time required to collect the necessary application queries.  For more information about the Oracle SQL Trace Facility and related guidelines on performing application tracing, visit the [Oracle documentation](https://docs.oracle.com/en/database/oracle/oracle-database/19/tgsql/performing-application-tracing.html#GUID-440D3AD4-B302-408E-8627-FE8032DD09F9).  
   !!!

      Instructions for stopping the trace are provided in the last step of this procedure.


5. Run use cases of the application or run the regression test suite for the application so that the application generates most of the SQL statements.  

6. In the Oracle client, execute the following query to retrieve the `SPID`, which can be used to identify the trace file generated for the application session:

   ```SQL
   SELECT a.sid, a.serial#, substr(a.username, 1, 10) usr, substr(a.osuser,1,5) osusr, b.spid FROM v$session a, v$process b WHERE a.paddr= b.addr and a.sid=16;
   __OUTPUT__
    SID  SERIAL#    USR               OSUSR       SPID
   ---- ---------- ---------------- ------------ --------
    16   6590       RS4_LIN32        abbas        122523
   ```

   !!! Tip
     Note the `SPID` returned by the query.


7. In the Oracle client, execute the following query to find the location of the trace file:

   ```SQL
   SELECT physical_path||'/'||physical_file trace_file FROM x$dbgdirext where physical_file like '%\_122523.trc' ESCAPE '\';
   __OUTPUT__
   TRACE_FILE
   ------------------------------------------------------------------------
   /u01/app/Oracle/diag/diag/rdbms/orcl/ORCL/trace/ORCL_ora_122523.trc
   ```

     When running the above query in your environment, replace `122523` with the `SPID` value returned by the query executed in the previous step.

  !!! Note
     Oracle introduced the `V$DIAG_TRACE_FILE` view in Oracle 12c Release 2 that can be queried instead of the `X$DBGDIREXT` table. The following query could be used to retrieve the trace file information from the view:
     
     ```SQL
     SELECT adr_home||'/'||trace_filename FROM V$DIAG_TRACE_FILE WHERE trace_filename LIKE '%\_43445.trc' ESCAPE '\';
     ```

     In both queries, a forward slash `/` is concatenated onto the trace directory path, which would be correct for Linux based systems. For Windows, however, the forward slash should be replaced with a backward slash `\`.

8. Find the trace file returned by the query in the previous step on the database server host machine: 

     In this example, the following is the full path to the file to locate:

   ```text
   /u01/app/Oracle/diag/diag/rdbms/orcl/ORCL/trace/ORCL_ora_122523.trc
   ```

9. Copy the trace file and share it with the migration assessment team.

10. In the Oracle client, execute the following statement to stop tracing of the application session:

   ```SQL
   EXECUTE dbms_system.set_sql_trace_in_session(16, 6590, false);
   ```
